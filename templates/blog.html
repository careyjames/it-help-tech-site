{% extends "base.html" %}

{% block content %}
<h1>Blog Posts ✍️</h1>

<ul class="post-list">
  {# section.pages is already sorted by date desc in Zola #}
  {% for page in section.pages %}
    <li class="post-item">

      <h2><a href="{{ page.permalink }}">{{ page.title }}</a></h2>

      {% if page.date or page.author -%}
        <p class="post-meta">
          {% if page.date -%}
            <time datetime="{{ page.date | date(format="%Y-%m-%d") }}">
              {{ page.date | date(format="%B %d, %Y") }}
            </time>
          {%- endif %}
          {% if page.author -%}
            &nbsp;&mdash; {{ page.author }}
          {%- endif %}
        </p>
      {%- endif %}

      {# thumbnail: prefer extra.image then page.image, fallback to logo #}
      {% set thumb = page.extra.image
                      | default(value=page.image)
                      | default(value='images/logo-blue-square.svg') %}
      <img src="{{ get_url(path=thumb) }}"
           alt="{{ page.title }} thumbnail"
           width="200"
           class="post-thumb">

      <div class="post-excerpt">
        {{ page.summary | default(value=page.content | striptags | truncate(length=160)) }}
      </div>

      <a href="{{ page.permalink }}" class="read-more">Read more &rarr;</a>
    </li>
  {% endfor %}
</ul>
{% endblock content %}
