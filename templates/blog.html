{% extends "base.html" %}

{% block content %}
<h1>Blog Posts ✍️</h1>

<ul class="post-list">
  {# section.pages is already sorted by date desc in Zola #}
  {% for page in section.pages %}
    <li class="post-item">

      <h2><a href="{{ page.permalink }}">{{ page.title }}</a></h2>

      {% if page.date -%}
        <p class="post-meta">
          <time datetime="{{ page.date | date(format="%Y-%m-%d") }}">
            {{ page.date | date(format="%B %d, %Y") }}
          </time>
        </p>
      {%- endif %}

      {# thumbnail: prefer extra.image but fall back to top-level image #}
      {% set thumb = page.extra.image or page.image %}
      {% if thumb %}
        <img src="{{ get_url(path=thumb) }}"
             alt="{{ page.title }} thumbnail"
             width="200"
             class="post-thumb">
      {% endif %}

      <div class="post-excerpt">
        {{ page.summary | default(value=page.content | striptags | truncate(length=160)) }}
      </div>

      <a href="{{ page.permalink }}" class="read-more">Read more &rarr;</a>
    </li>
  {% endfor %}
</ul>
{% endblock content %}
