(()=>{const d=document.documentElement,key="theme",btn=document.getElementById("mode");
/* 1 – honour whatever was stored last time */
if(localStorage.getItem(key)==="dark"){d.dataset.theme="dark";}
/* 2 – toggle + persist */
btn&&btn.addEventListener("click",()=>{
  if(d.dataset.theme==="dark"){
    d.removeAttribute("data-theme");
    localStorage.removeItem(key);
  }else{
    d.dataset.theme="dark";
    localStorage.setItem(key,"dark");
  }
});
})();
